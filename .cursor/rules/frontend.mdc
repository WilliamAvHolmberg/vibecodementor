---
description: 
globs: frontend/**/*,*.tsx,*.ts,*.css
alwaysApply: false
---
# Frontend Architecture - Vertical Slices

## ðŸŽ¯ Philosophy: PRAGMATIC OVER PERFECT
- **Speed over purity** - Ship features fast, refactor later
- **Simple patterns** - Avoid over-engineering 
- **Consistency** - Follow established patterns for AI predictability

## ðŸ“ Structure
```
src/
â”œâ”€â”€ features/          # Self-contained feature slices
â”œâ”€â”€ shared/           # Reusable components/hooks
â”œâ”€â”€ api/              # ðŸ¤– ORVAL GENERATED (DO NOT EDIT)
â””â”€â”€ app/              # Next.js App Router
```

## ðŸ—ï¸ Feature Slice Pattern
```
features/feature-name/
â”œâ”€â”€ index.ts          # Exports (import { X } from '@/features/auth')
â”œâ”€â”€ components/       # Feature components
â”œâ”€â”€ hooks/           # Wraps api/hooks with business logic
â””â”€â”€ [name]-context.tsx # Feature state (if needed)
```

## ðŸ¤– Orval Integration - CRITICAL
- **Generated**: `api/hooks/` (React Query) + `api/models/` (DTOs)
- **Regenerate**: `npm run api:generate` after backend changes
- **Pattern**: Features wrap generated hooks, add business logic
- **ðŸš¨ NEVER EDIT**: Generated files will be overwritten

## ðŸ”§ Tech Stack
- **Next.js 15** + **React 19** + **TypeScript 5**
- **React Query** + **shadcn/ui** + **Tailwind CSS**
- **Axios** (JWT auth) + **SignalR** (real-time)

## ðŸ“‹ Patterns

### Imports
```typescript
// External first
import { useState } from 'react';
// Internal with aliases
import { Button } from '@/shared/components/ui/button';
import { useAuth } from '@/features/auth';
import { useUsers } from '@/features/users'; // âœ… Cross-feature OK
```

### Components
```typescript
export function Component({ prop }: Props) {
  // Hooks first
  const { data, isLoading } = useHook();
  
  // Event handlers
  const handleClick = () => {};
  
  // Render
  return <div>{content}</div>;
}
```

### API Hook Wrapping
```typescript
// features/users/hooks/use-users.ts
import { useGetUsers } from '@/api/hooks'; // Generated

export function useUsers() {
  const query = useGetUsers();
  
  // Add business logic here
  return {
    ...query,
    displayUsers: query.data?.map(u => ({
      ...u,
      fullName: `${u.firstName} ${u.lastName}`
    }))
  };
}
```

## ðŸŽ¯ Key Rules
- âœ… Never edit `api/hooks/` or `api/models/`
- âœ… Features CAN import from other features (be pragmatic)
- âœ… Use Server Components by default, 'use client' when needed
- âœ… JWT from localStorage, axios interceptors for auth
- âœ… Wrap generated hooks in feature-specific hooks
- âœ… Keep it simple - avoid over-engineering
- âœ… Consistency over cleverness

## ðŸš¨ Critical Gotchas
- **Orval regeneration** wipes `api/` folder - never edit directly
- **'use client'** needed for hooks, state, event handlers
- **SignalR connections** need cleanup in useEffect
- **JWT expiry** - handle 401s gracefully
- **Loading states** - always handle isLoading/error from React Query